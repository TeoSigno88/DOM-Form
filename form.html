<!DOCTYPE html>
<html lang="it-IT">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esercitazione Form</title>
    <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    
    <style>
        
    </style>

</head>
<body>
    <div class="container">
        <header>
            <h1>Esercitazione FORM</h1>
        </header>

        <main>
            <div class="row align-items-star">
                <div class="col">

                    <div class="card mb-3">
                        <div class="card-body">
                            <h5 class="card-title">Inserisci nuova persona</h5>
                            <form>
                               <label class="required-field mb-1" for="name">Nome</label>
                               <input class="form-control" type="text" name="name" id="nome" placeholder="Nome" required>

                               <label class="required-field mt-1" for="eta">Età</label>
                               <input class="form-control mb-1" type="number" name="età" id="eta" placeholder="Età" required>

                               <label class="required-field mt-1" for="citta">Città</label>
                               <input class="form-control mb-1" type="text" name="città" id="citta" placeholder="Città">
                                
                               <button class="btn btn-primary mt-3" type="submit">Invia</button>
                            </form>
                        </div>
                    </div>
                    

                    <div class="card mb-3">
                        <div class="card-body">
                            <h5 class="card-title">Seleziona per compleanno</h5>
                            <form>
                                <select class="form-select" aria-label="Default select example">
                                    <option id="select" selected>Seleziona una persona</option>
                                </select>
                                
                                <button class="btn btn-primary mt-3" type="submit">Invia</button>
                            </form>
                        </div>
                    </div>

                </div>
                <div class="col">

                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Persona</h5>
                            <ul class="list-group" id="persons-list"></ul>
                        </div>
                    </div>

                </div>
            </div>
        </main>

        <footer>
            <p>Sono il footer</p>
        </footer>
    </div>
    <!-- library di Bootstrapt -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>



<script type="module">
function CostructorPerson(name, age, city){
    this.name = name;
    this.age = age;
    this.city = city || "";
}

const persons = [];


import {printPerson, form1, birthDatePersons} from "./formPopulation.js"

const form1 = document.forms.item(1);
function birthDatePersons(argument){
    if(argument instanceof Array){
        const selectElement = form1.elements[0];    //Node

        const firstOption = [selectElement[0]]; //Array
        const newOptionElement = argument.map((argument) => new Option(argument.name + " " + argument.age)) //Array
        const newContent = firstOption.concat(newOptionElement) //Array

        selectElement.innerHTML = "";
        
        newContent.forEach((item) => {
            selectElement.appendChild(item);
        })
    }
}

const form0 = document.forms.item(0);
form0.addEventListener("submit", (event) =>{
    event.preventDefault();
    event.stopPropagation();

    let name = form0.elements[0].value;
    let age = form0.elements[1].value;
    let city = form0.elements[2].value;
    
    persons.push(new CostructorPerson(name, age, city));
    printPerson(persons);
    birthDatePersons(persons)
    form0.reset();
});


</script>
    
</body>
</html>

